{"filter":false,"title":"views.py","tooltip":"/app/views.py","undoManager":{"mark":7,"position":7,"stack":[[{"start":{"row":130,"column":0},"end":{"row":135,"column":0},"action":"remove","lines":["","# Return sitemap ","@app.route('/sitemap.xml')","def sitemap():","    return send_from_directory(os.path.join(app.root_path, 'static'), 'sitemap.xml')",""],"id":1}],[{"start":{"row":110,"column":0},"end":{"row":111,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":1,"column":0},"end":{"row":5,"column":0},"action":"remove","lines":["\"\"\"","License: MIT","Copyright (c) 2019 - present AppSeed.us","\"\"\"",""],"id":3},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":16},"action":"remove","lines":["# Python modules"],"id":4},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":15},"action":"remove","lines":["","# Flask modules"],"id":5}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":13},"action":"remove","lines":["","# App modules"],"id":6}],[{"start":{"row":123,"column":0},"end":{"row":124,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":124,"column":0},"end":{"row":125,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":125,"column":0},"end":{"row":161,"column":16},"action":"insert","lines":["#------UPLOADING VIDEO FUNC","def resumable_upload(request):","  response = None","  error = None","  retry = 0","  while response is None:","    try:","      print ('Uploading file...')","      status, response = request.next_chunk()","      if response is not None:","        if 'id' in response:","          print ('Video id \"%s\" was successfully uploaded.' % response['id'])","          return response['id']","        else:","          #exit('The upload failed with an unexpected response: %s' % response)","          return \"ERROR\"","    except HttpError as e:","      if e.resp.status in RETRIABLE_STATUS_CODES:","        error = 'A retriable HTTP error %d occurred:\\n%s' % (e.resp.status,","                                                             e.content)","      else:","        raise","    except RETRIABLE_EXCEPTIONS as e:","      error = 'A retriable error occurred: %s' % e","","    if error is not None:","      print (error)","      retry += 1","      if retry > MAX_RETRIES:","        #exit('No longer attempting to retry.')","        return \"ERROR\"","","      max_sleep = 2 ** retry","      sleep_seconds = random.random() * max_sleep","      print ('Sleeping %f seconds and then retrying...' % sleep_seconds)","      time.sleep(sleep_seconds)","  return \"ERROR\""],"id":8}]]},"ace":{"folds":[],"scrolltop":1604,"scrollleft":0,"selection":{"start":{"row":161,"column":16},"end":{"row":161,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":113,"state":"start","mode":"ace/mode/python"}},"timestamp":1582473099769,"hash":"02d4d2a4436b5706220aa1bc8f1ea89ff9b6874b"}